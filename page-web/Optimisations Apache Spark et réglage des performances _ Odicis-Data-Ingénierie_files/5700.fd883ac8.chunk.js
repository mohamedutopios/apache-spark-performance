(self.webpackChunklite=self.webpackChunklite||[]).push([[5700],{24049:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var i=t(67294);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a.apply(this,arguments)}var l=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm1 0a10 10 0 1 1-20 0 10 10 0 0 1 20 0zm-9.07-4.74a.25.25 0 0 0-.25-.26h-1.2a.25.25 0 0 0-.25.26l.13 6.29c0 .13.12.24.25.24h.94c.13 0 .24-.1.25-.24l.13-6.3zM11 16.25c0-.66.44-1.09 1.09-1.09.66 0 1.08.43 1.08 1.09 0 .64-.43 1.06-1.08 1.06-.65 0-1.09-.42-1.09-1.06z",fill:"#C94A4A"});const o=function(e){return i.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),l)}},69920:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var i=t(67294);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a.apply(this,arguments)}var l=i.createElement("path",{d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18zM8.25 12h7.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"});const o=function(e){return i.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),l)}},14045:(e,n,t)=>{"use strict";t.d(n,{M:()=>r});var i=t(67294),a=t(77355),l=t(93310),o=t(50458);function r(e){var n=e.entityName,t=void 0===n?"story":n;return i.createElement(a.x,{textAlign:"center"},"Deletion is not reversible, and the story will be completely deleted. If you do not want to delete, you can"," ",i.createElement(l.r,{target:"_blank",href:o.aH,inline:!0,linkStyle:"OBVIOUS"},"unlist the ",t),".")}},5351:(e,n,t)=>{"use strict";t.d(n,{f:()=>c,w:()=>u});var i=t(34699),a=t(67294),l=t(14646),o=t(68894),r=t(47786),d=function(e){return{overflow:"hidden",transition:"opacity 300ms ease".concat(e?"":" 300ms",", max-height 300ms ease").concat(e?" 300ms":""),maxHeight:e?"0":"450px",opacity:e?0:1}},s=(0,a.createContext)({});function c(e){var n=e.children,t=e.post,c=e.hidePost,u=e.unhidePost,m=(0,l.I)(),p=(0,a.useRef)(!1),k=(0,a.useState)(!1),v=(0,i.Z)(k,2),f=v[0],g=v[1],b=(0,o.O)(!1),S=(0,i.Z)(b,3),y=S[0],h=S[1],E=S[2],N=(0,a.useCallback)((function(e){f&&p.current&&("max-height"===e.propertyName?(h(),p.current=!1):null==c||c(t.id))}),[f,t.id,c]),w=(0,a.useCallback)((function(){p.current=!0,g(!0)}),[]),x=(0,a.useCallback)((function(){g(!1),null==u||u(t.id)}),[u,t.id]),C=(0,a.useMemo)((function(){return{animateShowLess:w,animateUndo:x}}),[w,x]);return a.createElement(s.Provider,{value:C},a.createElement("div",{className:m(d(f)),onTransitionEnd:N},n),a.createElement(r.T,{post:t,isVisible:y,hide:E}))}var u=function(){return(0,a.useContext)(s)}},67912:(e,n,t)=>{"use strict";t.d(n,{d:()=>a});var i=t(87329),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}}]}}].concat((0,i.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]))}},47786:(e,n,t)=>{"use strict";t.d(n,{T:()=>x});var i=t(34699),a=t(67294),l=t(78964),o=t(78038),r=t(25550),d=t(61095),s=t(50474),c=t(77355),u=t(53563),m=t(18627),p=t(66411),k=t(75221),v=t(68894),f=t(87691),g=t(14646),b=t(24049);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},S.apply(this,arguments)}var y=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.3 9.5v5H2v-5h2.3zm1-.12v5.24l.1.08 7.6 5.78V3.52L5.4 9.3l-.1.08zm7.9-7.27L4.8 8.5H1.5A.5.5 0 0 0 1 9v6c0 .28.22.5.5.5h3.3l8.4 6.39c.33.25.8.02.8-.4V2.51a.5.5 0 0 0-.8-.4zm5.65 7.03a.5.5 0 0 0-.7.71L20.29 12l-2.14 2.15a.5.5 0 1 0 .7.7L21 12.72l2.15 2.15a.5.5 0 1 0 .7-.71L21.71 12l2.14-2.15a.5.5 0 1 0-.7-.7L21 11.28l-2.15-2.15z",fill:"currentColor"});const h=function(e){return a.createElement("svg",S({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),y)};var E=function(e){return function(n){return{padding:"16px 24px",border:"none",cursor:"pointer",display:"flex","&:first-of-type":{paddingTop:"20px"},"&:last-of-type":{paddingBottom:"20px"},"&:not(:last-of-type)":{borderBottom:"1px solid ".concat(n.colorTokens.border.neutral.primary.base)},"& svg path":{fill:e?n.colorTokens.foreground.error.primary.base:n.colorTokens.foreground.neutral.secondary.base},":hover svg path":{fill:e?n.colorTokens.foreground.error.primary.hover:n.colorTokens.foreground.neutral.primary.base}}}};function N(e){var n=e.onClick,t=e.isReport,i=e.text,l=e.detail,o=(0,g.I)();return a.createElement("button",{className:o(E(t)),onClick:n},t?a.createElement(b.Z,null):a.createElement(h,null),a.createElement(c.x,{marginLeft:"24px",display:"flex",flexDirection:"column",gap:"4px",textAlign:"left"},a.createElement(f.F,{scale:"M",color:t?"ERROR":"DARKER",clamp:1},i),l&&a.createElement(f.F,{scale:"S",clamp:1},l)))}var w=t(97048);function x(e){var n,t,o=e.hide,c=e.isVisible,u=e.post,m=null!==(n=null===(t=u.creator)||void 0===t?void 0:t.id)&&void 0!==n?n:"",k=(0,d.Pd)({id:m}).viewerEdge,f=(0,r.r)().viewerId,g=(0,v.O)(!1),b=(0,i.Z)(g,3),S=b[0],y=b[1],h=b[2],E=(0,l.J)({viewerId:f,targetAuthorId:m,targetPostId:u.id,onOptimisticComplete:h}),N=(0,a.useCallback)((function(){y(),o()}),[o]);return a.createElement(a.Fragment,null,c&&a.createElement(p.cW,{source:{dimension:"negative_signal_modal"},extendSource:!0},a.createElement(C,{post:u,report:N,hide:o})),a.createElement(s.U,{isVisible:S,hide:h,type:"story",alreadyBlocking:!(null==k||!k.isBlocking),onSubmit:E}))}function C(e){var n=e.post,t=e.report,l=e.hide,o=(0,a.useState)(!1),r=(0,i.Z)(o,2),d=r[0],s=r[1],m=(0,w.e)(n.id),p=m.undo,v=m.showUndoToast,f=(0,a.useCallback)((function(){d&&(v(k.tG.SHOW_LESS),s(!1)),l()}),[d,l]),g=(0,a.useCallback)((function(){p(),s(!0)}),[p]);return a.createElement(u.u,{hide:f,title:"Got it, we'll recommend fewer like this",subtitleTextAlign:"center",subtitle:"You can always show more/less from a story’s “••• More” icon.",padding:"40px 32px 32px",subtitleMargin:"16px",confirmButtonStyle:"BRAND",confirmText:"Done",cancelText:"Undo",cancelButtonStyle:"SUBTLE",onCancel:g},a.createElement(c.x,{display:"flex",justifyContent:"center",marginBottom:"32px"},a.createElement(c.x,{width:"100%",maxWidth:"320px",display:"flex",flexDirection:"column",borderRadius:"8px",border:"neutral.primary"},n.creator&&!n.creator.viewerEdge.isMuting&&a.createElement(F,{publisher:n.creator,hide:l}),n.collection&&!n.collection.viewerEdge.isMuting&&a.createElement(F,{publisher:n.collection,hide:l}),a.createElement(N,{onClick:t,isReport:!0,text:"Report story..."}))))}function F(e){var n=e.publisher,t=e.hide,i=(0,m.A)(),l="User"===n.__typename,r=(0,o.l)(l?n.id:null,l?null:n.id),d=r.muteAuthor,s=r.mutePub,c=(0,a.useCallback)((function(){var e="".concat(n.__typename.toLowerCase(),".muted");i.event(e,{targetUserId:l?n.id:void 0,collectionId:l?void 0:n.id}),l?d():s(),t()}),[d,s,l,n]);return a.createElement(N,{onClick:c,text:"Mute ".concat(l?"author":"publication"),detail:n.name})}},97048:(e,n,t)=>{"use strict";t.d(n,{e:()=>h});var i=t(96156),a=t(34699),l=t(21919),o=t(64718),r=t(67294),d=t(25550),s=t(18627),c=t(66411),u=t(75221),m=t(78285),p=t(11462),k=t(5351),v=t(87329),f=t(67912),g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExplicitSignalPostQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_post"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"explicitSignalState"}}]}}]}}]}}].concat((0,v.Z)(f.d.definitions))},b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ExplicitSignalMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"signal"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ExplicitUserSignal"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendExplicitSignal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"signal"},value:{kind:"Variable",name:{kind:"Name",value:"signal"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function h(e,n){var t,i,v=(0,s.A)(),f=(0,c.Lk)()||{},S=(0,d.r)().viewerId,h=(0,m.w)(),E=(0,k.w)().animateUndo,N=(0,l.D)(b),w=(0,a.Z)(N,1)[0],x=(0,o.a)(g,{variables:{id:e},fetchPolicy:n}),C=x.data,F=x.loading,O=null==C||null===(t=C.post)||void 0===t||null===(i=t.viewerEdge)||void 0===i?void 0:i.explicitSignalState,P=(0,r.useCallback)((function(n){w({variables:{postId:e,signal:n},update:function(t){S&&t.modify({id:"PostViewerEdge:".concat((0,p.Q)(e,S)),fields:{explicitSignalState:function(){return n===u.tG.CLEAR_SIGNAL?null:n}}})}})}),[w,e,S]),I=(0,r.useCallback)((function(n){var t=n.name,i=n.data,a=n.dimension;return v.event(t,y({postId:e,source:a?(0,c.f0)(y(y({},f),{},{dimension:a})):(0,c.f0)(f)},i))}),[e,f]),D=(0,r.useCallback)((function(e){var n=O===u.tG.SHOW_MORE;P(u.tG.CLEAR_SIGNAL),I({name:"post.see_".concat(n?"more":"less",".undo"),dimension:e}),n?R(u.tG.SHOW_MORE):null==E||E()}),[e,O,E]),T=(0,r.useCallback)((function(){P(u.tG.SHOW_MORE),I({name:"post.see_more"})}),[I,P]),A=(0,r.useCallback)((function(){P(u.tG.SHOW_LESS),I({name:"post.see_less",data:{mutationSent:!0}})}),[I,P]),R=(0,r.useCallback)((function(e){h({message:"Undone. We won’t recommend ".concat(e===u.tG.SHOW_LESS?"fewer":"more"," stories like this."),extraParams:{hideCloseButton:!0}})}),[]),V=(0,r.useCallback)((function(){h({toastStyle:"USER_POSITIVE_SIGNAL",extraParams:{onClickUndo:function(){return D("toast")}}})}),[h,D]);return{loading:F,undo:D,showMore:T,showLess:A,explicitSignal:O,showUndoToast:R,showMoreToast:V}}},45700:(e,n,t)=>{"use strict";t.d(n,{c:()=>Vn});var i=t(96156),a=t(22122),l=t(81253),o=t(67294),r=t(34699),d=t(48403),s=t.n(d),c=t(64718),u=t(14045),m=t(38352),p=t(93310),k=t(77355),v=t(18634),f=t(353);function g(e){var n=e.onClick,t=e.hidePopover,i=e.showAt,a=(0,o.useCallback)((function(){t(),n()}),[n,t]);return o.createElement(v.y,{xs:i.xs,sm:i.sm,md:i.md,lg:i.lg,xl:i.xl},o.createElement(m.Sl,null,o.createElement(p.r,{"aria-controls":"aria-id","aria-expanded":"false",onClick:a},o.createElement(k.x,{display:"flex",flexDirection:"row",alignItems:"center",ariaHidden:"true",gap:"12px"},o.createElement(f.Z,null),"Save"))),o.createElement(m.oK,null))}var b=t(38356),S=t(42130),y=["isResponsive"],h=function(e){var n=e.isResponsive,t=(0,l.Z)(e,y);return o.createElement(b.u,(0,a.Z)({text:n?"More":void 0,icon:o.createElement(S.Z,null)},t))},E=t(86706),N=t(13195),w=t(6443),x=t(39507),C=t(83486),F=t(43487),O=t(51681),P=function(e){var n=e.post,t=e.hidePopover,i=(0,w.H)().value,a=null==i?void 0:i.id,l=(0,x.T)(n).viewerEdge,r=(0,E.I0)(),d=o.useCallback((function(e){return r((0,C.at)(e))}),[r]),s=(0,F.b$)((function(e){return e.multiVote.clapsPerPost})),c=(0,O.l)(s,n,l),u=c.clapCount,k=c.viewerClapCount,v=(0,N.C)();return a&&u&&k&&k>0?o.createElement(o.Fragment,null,o.createElement(m.Sl,null,o.createElement(p.r,{onClick:function(){v(n,(null==i?void 0:i.id)||"",-k,l),d({postId:n.id,clapCount:u-k,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),t()}},"Undo claps")),o.createElement(m.oK,null)):null},I=t(23768),D=t(32947),T=t(70028),A=t(66021),R=t(90833),V=t(70679),_=t(87691),M=t(14646),j=t(50458),L={cursor:"not-allowed",marginBottom:"8px",opacity:.5},Z=function(e){var n=e.post,t=e.shareKey,i=(0,M.I)();return n&&t?o.createElement(m.Sl,null,o.createElement(k.x,{width:"174px"},o.createElement("div",{className:i(L)},"Copy Friend Link"),o.createElement(_.F,{scale:"S",color:"LIGHTER"},'Friend links have moved to the "Share" menu.  ',o.createElement(p.r,{linkStyle:"OBVIOUS",inline:!0,href:(0,j.wA)()},"Learn more")))):null},B=t(32493),U=t(78285),H={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostAllowResponsesMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostAllowResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"allowResponses"},value:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}}]}}]}}]},z=(0,E.$j)()((function(e){var n=e.children,t=e.dispatch,i=e.onCompleted,a=e.targetPostId;return o.createElement(B.m,{mutation:H,onCompleted:function(){t((0,U.Dx)({message:"Responses are now hidden for this post."})),i&&i()},variables:{targetPostId:a,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!1}}},(function(e){return n({mutate:e})}))})),G=(0,E.$j)()((function(e){var n=e.children,t=e.dispatch,i=e.onCompleted,a=e.targetPostId;return o.createElement(B.m,{mutation:H,onCompleted:function(){t((0,U.Dx)({message:"Responses are now shown for this post."})),i&&i()},variables:{targetPostId:a,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!0}}},(function(e){return n({mutate:e})}))})),K=t(75675),W=t(68894),Q=function(e){var n=e.hidePopover,t=e.postId,i=e.allowResponses,a=(0,W.O)(!1),l=(0,r.Z)(a,3),d=l[0],s=l[1],c=l[2],u=function(){c(),n()};return o.createElement(o.Fragment,null,o.createElement(z,{targetPostId:t},(function(e){var n=e.mutate;return o.createElement(K.w,{onConfirm:n,isVisible:d,hide:u,entityTypename:"Post"})})),o.createElement(G,{targetPostId:t},(function(e){var n=e.mutate;return o.createElement(m.Sl,null,o.createElement(p.r,{onClick:function(){i?s():n()}},i?"Hide responses":"Show responses"))})))},Y=t(75412),J=t(71652),q=t(87329),X=t(84683),$={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionOption_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}].concat((0,q.Z)(X.d.definitions))},ee={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionSubmissionPopoverQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"writerCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"adminCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}}]}}]}}].concat((0,q.Z)($.definitions))},ne=t(21919),te=t(75221),ie=[{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}],ae={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ManageCollectionPostStatusMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}}].concat((0,q.Z)(ie))},le={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RejectPostFromPubMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}}].concat((0,q.Z)(ie))},oe=function(e){var n=(0,ne.D)(ae),t=(0,r.Z)(n,1)[0];return(0,o.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:te.Zj.APPROVED}})}),[e])},re=function(e){var n=(0,ne.D)(le),t=(0,r.Z)(n,1)[0];return(0,o.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:te.Zj.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(e){if(e.errors&&e.errors[0])throw e.errors[0];return e}))}),[e])},de=t(25267),se=t(91583),ce=t(47230),ue=t(66227),me=t(73917),pe=t(70310),ke=t(20113),ve=t(90586),fe=t(34135),ge="collectionSubmissionPopover",be=[{name:"",value:"No publication",content:o.createElement(k.x,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},o.createElement(_.F,{scale:"M",color:"DARKER"},"No publication"))}];function Se(e){var n=e.collection;return n.name?o.createElement(k.x,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},o.createElement(_.F,{scale:"M",color:"DARKER"},n.name),o.createElement(J.v,{collection:n,size:32})):null}function ye(e){var n=e.show,t=e.post,i=t.statusForCollection,a=t.isPublished,l=o.useState(!1),d=(0,r.Z)(l,2),s=d[0],c=d[1];return s||fe.V6.on("load",(function(){return c(!0)})),!i&&a&&s?o.createElement(Ee,{post:t,noQueryReturn:null},(function(e){var i=e.loading,a=e.error,l=e.data;if(i||a)return null;var r=(void 0===l?{viewer:void 0}:l).viewer,d=t.creator;if(!r||!d||r.id!==d.id)return null;var s=r.adminCollections,c=r.writerCollections;return 0===s.length&&0===c.length?null:o.createElement(m.Sl,null,o.createElement(p.r,{"aria-controls":ge,"aria-expanded":"false",onClick:n},"Add to publication"))})):null}function he(e){var n=e.isVisible,t=e.hide;return o.createElement(se.V,{isVisible:n,hide:t,withCloseButton:!0},o.createElement(k.x,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},o.createElement(ke.X6,{scale:"M",tag:"h3"},"Story submitted"),o.createElement(k.x,{paddingTop:"8px",paddingBottom:"24px"},o.createElement(ve.QE,{scale:"M"},"We’ll email you when the publication editor has reviewed your submission.")),o.createElement(ce.zx,{buttonStyle:"OBVIOUS",onClick:t},"OK")))}var Ee=function(e){var n=e.children,t=e.post,i=e.noQueryReturn,a=t.creator;return a?o.createElement(de.I,null,(function(e){return e?e.id!==a.id?i:o.createElement(Y.A,{query:ee,ssr:!1},(function(e){var t=e.loading,i=e.error,a=e.data;return n({loading:t,error:i,data:a})})):i})):i},Ne=function(e){var n=e.post,t=e.hide,i=e.showLoadingIndicator,a=e.isVisible,l=e.children,d=o.useState(!1),s=(0,r.Z)(d,2),c=s[0],u=s[1],m=o.useState(""),v=(0,r.Z)(m,2),f=v[0],g=v[1],b=oe(n),S=function(e){var n=(0,ne.D)(ae),t=(0,r.Z)(n,1)[0];return(0,o.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:te.Zj.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:te.Zj.PENDING,pendingCollection:n}}})}),[e])}(n);return c||fe.V6.on("load",(function(){return u(!0)})),n.isPublished&&c?o.createElement(ue.B,null,(function(e){var r=e.isVisible,d=e.hide,s=e.show;return o.createElement(o.Fragment,null,o.createElement(he,{hide:d,isVisible:r}),o.createElement(Ee,{post:n,noQueryReturn:l},(function(e){var r=e.loading,d=e.error,c=e.data;if(r||d)return l;var u=(void 0===c?{viewer:void 0}:c).viewer,m=n.creator;if(!u||!m||u.id!==m.id)return l;var v=u.adminCollections,y=u.writerCollections;if(0===v.length&&0===y.length)return l;var h=v.concat(y).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:o.createElement(Se,{collection:e})}})),E=be.concat(h),N=v.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),w=y.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),x="";if(f){var C=E.find((function(e){return e.name===f}));C&&(x=C.value)}var F="addStoryToPublicationTitle";return o.createElement(me.J,{ariaId:ge,hide:t,isVisible:a,popoverRenderFn:function(){return o.createElement(k.x,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},o.createElement(_.F,{scale:"M",color:"DARKER",ariaLabelledById:F},"Add your story to a publication:"),o.createElement(k.x,{marginTop:"10px",position:"relative"},o.createElement(k.x,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),o.createElement(k.x,{maxHeight:"160px",overflow:"auto"},o.createElement(pe.E,{value:x,onChange:g,options:E,radioButtonsName:"addStory",ariaLabelledBy:F}))),o.createElement(k.x,{display:"flex",marginTop:"20px"},f in N?o.createElement(ce.zx,{onClick:function(){var e=N[f];t(),i(),b(e).then((function(){window.location.reload()}))},buttonStyle:"OBVIOUS"},"Add story"):o.createElement(ce.zx,{onClick:function(){var e=w[f];S(e),t(),s()},disabled:!f},"Submit"),o.createElement(k.x,{marginLeft:"10px"},o.createElement(_.F,{scale:"M",color:"LIGHTER"},o.createElement(p.r,{onClick:t},o.createElement(k.x,{padding:"10px"},"Cancel"))))),o.createElement(k.x,{marginTop:"10px"},o.createElement(_.F,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},l)})))})):l},we=function(e){var n=e.children,t=e.isVisible,i=e.post,a=e.hide,l=e.showLoadingIndicator,r=oe(i),d=re(i),s=(0,E.I0)(),c=i.pendingCollection;return c?o.createElement(me.J,{ariaId:"manageSubmissionPopover",isVisible:t,hide:a,popoverRenderFn:function(){return o.createElement(k.x,{padding:"16px",maxWidth:"280px"},o.createElement(k.x,{display:"flex",flexDirection:"row",alignItems:"center"},o.createElement(k.x,{paddingRight:"8px"},o.createElement(J.v,{collection:c,size:40})),o.createElement(_.F,{scale:"S"},"This draft is submitted to ",c.name,".")),o.createElement(k.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},o.createElement(k.x,{paddingRight:"8px"},o.createElement(ce.zx,{buttonStyle:"OBVIOUS",onClick:function(){a(),l(),r(i.pendingCollection).then((function(){window.location.reload()}))}},"Accept")),o.createElement(ce.zx,{buttonStyle:"SUBTLE",onClick:function(){d(i.pendingCollection).then((function(){s((0,U.Dx)({message:"Story removed from ".concat(c.name||"publication")}))})),a()}},"Don't accept")))}},n):n},xe=function(e,n){return n&&e.creator&&n.id===e.creator.id},Ce=t(39727),Fe="removeFromPublicationPopover",Oe=function(e){var n=e.viewer,t=e.show,i=e.post,a=(0,Ce.g)(i.pendingCollection||i.collection).viewerEdge,l=null==a?void 0:a.isEditor;return n&&("APPROVED"===i.statusForCollection&&(l||function(e,n){var t=e.pendingCollection||e.collection;return t&&t.creator&&n.id===t.creator.id}(i,n)||xe(i,n))||"PENDING"===i.statusForCollection&&xe(i,n))?o.createElement(m.Sl,null,o.createElement(p.r,{"aria-controls":Fe,"aria-expanded":"false",onClick:t},"Remove story from publication")):null},Pe=function(e){var n=e.children,t=e.isVisible,i=e.hide,a=e.post,l=e.viewer,r=(0,E.I0)(),d=re(a),s=a.collection||a.pendingCollection;return s?o.createElement(me.J,{ariaId:Fe,isVisible:t,hide:i,popoverRenderFn:function(){return o.createElement(k.x,{padding:"16px",maxWidth:"280px"},o.createElement(k.x,{display:"flex",flexDirection:"row",alignItems:"center"},o.createElement(k.x,{paddingRight:"8px"},o.createElement(J.v,{collection:s,size:40})),"APPROVED"===a.statusForCollection?o.createElement(_.F,{scale:"S"},xe(a,l)?"Your":"This"," story is published in"," ",s.name,"."):"PENDING"===a.statusForCollection?o.createElement(_.F,{scale:"S"},"Your story is being reviewed by ",s.name," editors."):o.createElement(_.F,{scale:"S"},"This draft is submitted to ",s.name)),o.createElement(k.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},o.createElement(k.x,{paddingRight:"8px"},o.createElement(ce.zx,{buttonStyle:"SUBTLE",onClick:function(){d(s).then((function(){r((0,U.Dx)({message:"Story removed from ".concat(s.name||"publication")}))}),(function(){r((0,U.Dx)({message:"There was a problem removing the story from ".concat(s.name||"publication"),toastStyle:"ERROR"}))})),i()}},"PENDING"===a.statusForCollection?"Cancel submission":"Remove from ".concat(s.name||"")))))}},n):n},Ie=t(43220),De=t(31048),Te=t(74302),Ae=t(44573),Re=t(26350),Ve=t(96462),_e=t(45509),Me=t(61095),je=t(50474),Le=t(78964),Ze=function(e){var n=e.hidePopover,t=e.targetUserId,i=e.postId,a=e.viewerId,l=(0,Me.Pd)({id:t}).viewerEdge,d=!(null==l||!l.isBlocking),s=(0,W.O)(!1),c=(0,r.Z)(s,3),u=c[0],k=c[1],v=c[2],f=(0,o.useCallback)((function(){v(),n()}),[n,v]),g=(0,Le.J)({viewerId:a,targetAuthorId:t,targetPostId:i,onOptimisticComplete:f});return o.createElement(o.Fragment,null,o.createElement(je.U,{onSubmit:g,isVisible:u,hide:f,type:"story",alreadyBlocking:d}),o.createElement(m.Sl,null,o.createElement(p.r,{onClick:k,color:"RED"},"Report story...")))},Be=t(1383),Ue=t(92661),He=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(){for(var e=0,t=n;e<t.length;e++)(0,t[e])()}},ze=t(92001),Ge=t(93647),Ke=t(36736),We=t(91727),Qe=t(38487),Ye=t(57477),Je={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBase_post"}}]}}].concat((0,q.Z)(ze.m.definitions),(0,q.Z)(Ge.C.definitions),(0,q.Z)(ze.G.definitions),(0,q.Z)(Ke.x.definitions),(0,q.Z)(We.S.definitions),(0,q.Z)(Qe.g.definitions),(0,q.Z)(Ye._C.definitions))},qe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorActionOverflowPopoverQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}]}}].concat((0,q.Z)(Je.definitions))};function Xe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function $e(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Xe(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var en=function(e){var n=(0,c.a)(qe,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var t=$e($e({},e),{},{post:n.post});return o.createElement(nn,t)},nn=function(e){var n,t,i=e.post,l=e.showLoadingIndicator,d=e.hideUndoApplause,c=void 0!==d&&d,v=e.isResponsive,f=e.popoverPositioningStrategy,b=e.hideOnScroll,S=e.testId,y=e.prependMenuItems,E=e.rules,N=e.showAddToList,C=i.creator,O=i.collection,_=o.useState(!1),M=(0,r.Z)(_,2),L=M[0],B=M[1],H=o.useState(!1),z=(0,r.Z)(H,2),G=z[0],K=z[1],Y=o.useState(!1),J=(0,r.Z)(Y,2),q=J[0],X=J[1],$=i.allowResponses,ee=i.pendingCollection,ne=i.mediumUrl,ie=i.visibility,ae=(0,Ce.g)(O).viewerEdge,le=(0,Ce.g)(ee).viewerEdge,oe=(0,x.T)(i).viewerEdge,re=(0,U.w)(),de=(0,w.H)().value,se=null==de?void 0:de.id,ce=i.responseDistribution===te.Et.DISTRIBUTED,ue=!!i.inResponseToPostResult||!!i.inResponseToCatalogResult,pe=ue?"response":"story",ke=(0,De.K)(i),ve=(0,r.Z)(ke,2),fe=ve[0],ge=ve[1],be=(0,Ie.U)(i.collection),Se=(0,Ie.U)(i.creator),he=o.useCallback((function(e){var n,t,a;re({extraParams:{collectionName:(null===(n=i.collection)||void 0===n?void 0:n.name)||"",becamePinned:!(null===(t=e.data)||void 0===t||null===(a=t.setPinnedAt)||void 0===a||!a.pinnedAt)},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=i.collection)||void 0===n?void 0:n.name]),Ee=o.useCallback((function(e,n){var t;"MutationSuccess"===(null===(t=e.data)||void 0===t?void 0:t.setPostPinnedOnCreatorProfile.__typename)&&re({message:"This ".concat(pe,n?" has been unpinned from your profile's homepage":" has been pinned to your profile's homepage")})}),[]),xe=o.useCallback((function(){ge().then(he)}),[ge,he,null==i||null===(t=i.collection)||void 0===t?void 0:t.name]),Fe=(0,De.I)(i),Me=(0,r.Z)(Fe,2),je=Me[0],Le=Me[1],ze=o.useCallback((function(){Le().then((function(e){return Ee(e,je)}))}),[Le,Ee]),Ge=(0,F.v9)((function(e){return e.config.authDomain})),Ke=o.useState(!1),We=(0,r.Z)(Ke,2),Qe=We[0],Ye=We[1],Je=(0,W.O)(!1),qe=(0,r.Z)(Je,3),Xe=qe[0],$e=qe[1],en=qe[2],nn=(0,W.O)(!1),tn=(0,r.Z)(nn,4),an=tn[0],ln=tn[2],on=tn[3],rn=(0,T.j)(i.id),dn=(0,r.Z)(rn,1)[0],sn=(0,W.O)(!1),cn=(0,r.Z)(sn,3),un=cn[0],mn=cn[1],pn=cn[2],kn=(0,Ue.qt)("ShowHome",{}),vn=o.useCallback((function(){dn().then((function(){window.location.assign(kn)}))}),[dn,kn]),fn="Delete story";ce?fn="Delete story and response":ue&&(fn="Delete response");var gn=ce?Te.Q:o.createElement(u.M,{entityName:pe}),bn=(0,Ae.P5)("can_edit_members_only_posts");if(!C||!de)return null;var Sn=se===C.id,yn=(null==ae?void 0:ae.isEditor)||(null==le?void 0:le.isEditor),hn=Sn||yn,En=bn&&i&&i.isLocked,Nn=hn||En,wn="creatorActionOverflowMenu",xn="LOCKED"===ie,Cn=yn&&!Sn||!hn,Fn=!ue||ce,On=function(){ce&&(ln(),$e())};if(Qe)return o.createElement(R.l,{to:(0,j.d0)(Ge,i.id)});var Pn={kind:te.ej.POST,target:i};return o.createElement(o.Fragment,null,o.createElement(Be.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:Xe,onConfirm:function(){Ye(!0)},hide:en,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},Te.t),o.createElement(Be.Q,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:un,onConfirm:vn,hide:pn,titleText:fn,confirmText:"Delete",isDestructiveAction:!0},gn),o.createElement(I.a,(0,a.Z)({},Pn,{viewer:de}),(function(e){var n=e.onClick;return o.createElement(me.J,{targetDistance:10,ariaId:wn,isVisible:an,hide:ln,positioningStrategy:f,hideOnScroll:b,popoverRenderFn:function(){return o.createElement(m.mX,null,y&&o.createElement(o.Fragment,null,y(ln)),hn&&N&&o.createElement(g,{showAt:N,onClick:n,hidePopover:ln}),o.createElement(o.Fragment,null,o.createElement(D.l,{type:"popover",handleClick:On,href:(0,j.d0)(Ge,i.id),isVisible:!!Nn},"Edit ",pe),O&&yn&&be&&Fn&&o.createElement(m.Sl,null,o.createElement(p.r,{onClick:xe},fe?"Unpin this ".concat(pe," from "):"Pin this ".concat(pe," to "),O.name)),Sn&&Se&&Fn&&o.createElement(m.Sl,null,o.createElement(p.r,{onClick:ze},je?"Unpin this ".concat(pe," from your profile"):"Pin this ".concat(pe," to your profile"))),o.createElement(V.w,{post:i,onClick:ln,menuStyle:"TEXT"}),hn?o.createElement(o.Fragment,null,o.createElement(m.oK,null),o.createElement(m.Sl,null,o.createElement(p.r,{href:(0,j.KI)(Ge,i.id)},s()(pe)," settings"))):null,hn&&o.createElement(m.Sl,null,o.createElement(p.r,{href:(0,j.T0)(Ge,i.id)},s()(pe)," stats")),hn&&xn&&ne&&(null==oe?void 0:oe.shareKey)&&o.createElement(Z,{post:i,shareKey:null==oe?void 0:oe.shareKey}),hn&&o.createElement(m.oK,null),hn?o.createElement(o.Fragment,null,o.createElement(Q,{hidePopover:ln,postId:i.id,allowResponses:$}),o.createElement(ye,{post:i,show:function(){K(!0),ln()}}),o.createElement(Oe,{viewer:de,post:i,show:function(){X(!0),ln()}}),Sn&&o.createElement(m.Sl,null,o.createElement(p.r,{onClick:He(ln,mn),color:"RED"},"Delete ",pe))):null,Cn?o.createElement(o.Fragment,null,yn&&o.createElement(m.oK,null),!c&&o.createElement(P,{post:i,hidePopover:ln}),o.createElement(o.Fragment,null,se?o.createElement(Ze,{targetUserId:C.id,postId:i.id,hidePopover:ln,viewerId:se}):o.createElement(m.Sl,null,o.createElement(Re.R,{operation:"register",post:i,susiEntry:"report_footer"},"Report this ",pe))),o.createElement(A.q,{hidePopover:ln,creator:C,collection:O,postId:i.id}),o.createElement(Ve.F,{hidePopover:ln,creator:C,viewer:de}),o.createElement(_e.j,{hidePopover:ln,creator:C,viewer:de})):null))}},o.createElement(Ne,{post:i,isVisible:G,hide:function(){K(!1)},showLoadingIndicator:l},o.createElement(Pe,{viewer:de,post:i,isVisible:q,hide:function(){X(!1)}},o.createElement(we,{post:i,isVisible:L,hide:function(){B(!1)},showLoadingIndicator:l},o.createElement(k.x,{flexGrow:"0",marginRight:"-4px"},o.createElement(h,{ariaControls:wn,ariaExpanded:an?"true":"false",ariaLabel:"More options",onClick:function(){L?B(!1):G?K(!1):on()},isResponsive:v,tooltipText:"More",testId:S,rules:E}))))))})))},tn=t(8751),an=t(17417),ln=t(25735);function on(){return on=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},on.apply(this,arguments)}var rn=o.createElement("path",{d:"M6.2 16.8A7.5 7.5 0 1 0 16.8 6.2 7.5 7.5 0 0 0 6.2 16.8z",stroke:"#000",strokeWidth:2,strokeLinecap:"round"}),dn=o.createElement("path",{d:"M6 6l11 11",stroke:"#000",strokeWidth:2});const sn=function(e){return o.createElement("svg",on({width:19,height:19,viewBox:"0 0 23 23",fill:"none"},e),rn,dn)};var cn=t(69920);function un(){return un=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},un.apply(this,arguments)}var mn=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12a10 10 0 1 1-20 0 10 10 0 0 1 20 0zm-13.75-.5a.5.5 0 0 0 0 1h7.5a.5.5 0 0 0 0-1h-7.5z",fill:"currentColor"});const pn=function(e){return o.createElement("svg",un({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),mn)};function kn(){return kn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kn.apply(this,arguments)}var vn=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12a10 10 0 1 1-20 0 10 10 0 0 1 20 0zM12 7.75c.28 0 .5.22.5.5v3.25h3.25a.5.5 0 0 1 0 1H12.5v3.25a.5.5 0 0 1-1 0V12.5H8.25a.5.5 0 0 1 0-1h3.25V8.25c0-.28.22-.5.5-.5z",fill:"currentColor"});const fn=function(e){return o.createElement("svg",kn({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),vn)};function gn(){return gn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},gn.apply(this,arguments)}var bn=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18zm10-9a10 10 0 1 1-20 0 10 10 0 0 1 20 0zM7.75 12c0-.28.22-.5.5-.5h3.25V8.25a.5.5 0 0 1 1 0v3.25h3.25a.5.5 0 0 1 0 1H12.5v3.25a.5.5 0 0 1-1 0V12.5H8.25a.5.5 0 0 1-.5-.5z",fill:"currentColor"});const Sn=function(e){return o.createElement("svg",gn({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),bn)};var yn=t(5351),hn=t(47786),En=t(97048),Nn={pointerEvents:"none"};function wn(e){var n=e.hidePopover,t=e.post,i=(0,W.O)(!1),a=(0,r.Z)(i,3),l=a[0],d=a[1],s=a[2],c=(0,En.e)(t.id),u=c.loading,p=c.showMore,k=c.showLess,v=c.explicitSignal,f=c.undo,g=c.showUndoToast,b=c.showMoreToast,S=(0,yn.w)(),y=S.animateShowLess,h=S.animateUndo,E=v===te.tG.SHOW_MORE,N=v===te.tG.SHOW_LESS,w=(0,o.useCallback)((function(){E?f():(p(),b()),n()}),[p,n,E,f,b]),x=(0,o.useCallback)((function(){N?(f(),g(te.tG.SHOW_LESS),n(),null==h||h()):(k(),y?(n(),y()):d())}),[k,n,N,f,g,y,h]),C=(0,o.useCallback)((function(){n(),s()}),[n,s]);return o.createElement(o.Fragment,null,o.createElement(xn,{value:te.tG.SHOW_MORE,onClick:w,isSelected:E,loading:u}),o.createElement(xn,{value:te.tG.SHOW_LESS,onClick:x,isSelected:N,loading:u}),o.createElement(m.oK,null),o.createElement(hn.T,{isVisible:l,hide:C,post:t}))}var xn=function(e){var n=e.value,t=e.onClick,i=e.isSelected,a=e.loading;return o.createElement(m.Sl,{loading:a},o.createElement(p.r,{onClick:t,disabled:a,rules:a?Nn:void 0},o.createElement(k.x,{display:"flex"},o.createElement(k.x,{marginRight:"12px",flexShrink:"0"},o.createElement(Cn,{value:n,isSelected:i})),o.createElement(k.x,{display:"flex",flexDirection:"column",marginTop:"2px",gap:"4px",textAlign:"left"},i?"Undo show ":"Show ",n===te.tG.SHOW_MORE?"more":"less",o.createElement(_.F,{scale:"S"},i?"Undo recommending ":"Recommend ",n===te.tG.SHOW_MORE?"more":"fewer"," stories like this to me.")))))};function Cn(e){var n=e.isSelected;return e.value===te.tG.SHOW_MORE?n?o.createElement(fn,null):o.createElement(Sn,null):n?o.createElement(pn,null):o.createElement(cn.Z,null)}var Fn=t(17778),On=t(18627),Pn=t(66411);function In(e){var n=e.author,t=e.collection,i=e.hidePopover,a=(0,On.A)(),l=(0,Me.Pd)(n).viewerEdge,r=(0,Ce.g)(t).viewerEdge,d=(null==n?void 0:n.id)||"",s=(null==t?void 0:t.id)||"",c=null==l?void 0:l.isFollowing,u=null==r?void 0:r.isFollowing,k=(0,Fn.l)(d,s),v=k.followUser,f=k.unfollowUser,g=k.followCollection,b=k.unfollowCollection,S=(0,Pn.pK)(),y=(0,w.H)().value,h=y&&d===y.id,E=(0,o.useCallback)((function(){a.event("user.".concat(c?"unfollowed":"followed"),{followSource:S,targetUserId:d}),c?f():v(),null==i||i()}),[d,c,v,f,i,S]),N=(0,o.useCallback)((function(){a.event("collection.".concat(u?"unfollowed":"followed"),{followSource:S,collectionId:s}),u?b():g(),null==i||i()}),[s,u,g,i,S,b]);return y?o.createElement(o.Fragment,null,!!n&&!h&&o.createElement(m.Sl,null,o.createElement(p.r,{onClick:E},c?"Unfollow":"Follow"," author")),!!t&&!(null!=r&&r.isEditor)&&o.createElement(m.Sl,null,o.createElement(p.r,{onClick:N},u?"Unfollow":"Follow"," publication"))):null}var Dn=t(42732);function Tn(e){var n=e.post,t=e.setDismissedPostId,i=e.isResponsive,l=e.hideNegativeSignalItem,d=e.popoverPositioningStrategy,s=e.viewer,c=e.hideOnScroll,u=e.testId,v=e.prependMenuItems,f=e.rules,b=e.showAddToList,S=e.onButtonClick,y=n.id,E=n.creator,N=n.collection,w=(0,W.O)(!1),x=(0,r.Z)(w,4),C=x[0],F=x[2],O=x[3],D=(0,ln.V)({name:"enable_explicit_signals",placeholder:!1}),T=(0,o.useCallback)((function(){null==S||S(),O()}),[O,S]),R=(0,Dn.c)({post:n,onShowLess:F,setDismissedPostId:t}).handleShowLess,V={kind:te.ej.POST,target:n},_=(0,o.useCallback)((function(e){return o.createElement(m.mX,{width:D&&!l?"248px":void 0},v&&o.createElement(o.Fragment,null,v(F)),b&&o.createElement(g,{showAt:b,onClick:e,hidePopover:F}),!l&&(D?o.createElement(wn,{hidePopover:F,post:n}):o.createElement(k.x,{borderBottom:"neutral.primary",paddingBottom:"4px",marginBottom:"4px"},o.createElement(m.Sl,null,o.createElement(p.r,{onClick:R,"aria-label":"Show less like this"},o.createElement(k.x,{display:"flex",flexDirection:"row",alignItems:"center",borderBottom:void 0,ariaHidden:"true"},o.createElement(k.x,{marginRight:"4px"},o.createElement(sn,null)),o.createElement(k.x,null,"Show less like this")))))),o.createElement(P,{post:n,hidePopover:F}),o.createElement(In,{author:E,collection:N,hidePopover:F}),o.createElement(m.oK,null),o.createElement(A.q,{creator:E,collection:N,hidePopover:F,postId:y}),o.createElement(Ze,{postId:y,viewerId:null==s?void 0:s.id,targetUserId:(null==E?void 0:E.id)||"",hidePopover:F}))}),[D,v,b]);return null!=E&&E.id?o.createElement(I.a,(0,a.Z)({},V,{viewer:s}),(function(e){var n=e.onClick;return o.createElement(me.J,{isVisible:C,positioningStrategy:d,targetDistance:10,hide:F,popoverRenderFn:function(){return _(n)},hideOnScroll:c},o.createElement(h,{onClick:T,ariaLabel:"More options",isResponsive:i,tooltipText:"More",testId:u,rules:f}))})):null}var An=["post","setDismissedPostId","hideNegativeSignalItem","showExplicitSignalTooltip","showAddToList"];function Rn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Vn(e){var n=e.post,t=e.setDismissedPostId,r=e.hideNegativeSignalItem,d=e.showExplicitSignalTooltip,s=e.showAddToList,c=(0,l.Z)(e,An),u=n.creator,m=n.collection,p=n.visibility,k=(0,w.H)(),v=k.loading,f=k.value,g=(0,Ce.g)(m).viewerEdge,b=!v&&!!f,S=!(null==g||!g.isEditor),y=(null==f?void 0:f.id)===(null==u?void 0:u.id),h=p===te.Wn.UNLISTED?void 0:s;if(!u||!b)return null;if(S||y)return o.createElement(ue.B,null,(function(e){var t=e.show;return o.createElement(en,(0,a.Z)({post:n,showLoadingIndicator:t,showAddToList:h},c))}));var E=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Rn(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Rn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({post:n,setDismissedPostId:t,hideNegativeSignalItem:r,viewer:f,showAddToList:h},c);return d?o.createElement(_n,E):o.createElement(Tn,E)}function _n(e){var n=function(e){var n,t=(0,w.H)().value,i=(0,o.useState)(!(null==t||!t.dismissableFlags.includes(e))),a=(0,r.Z)(i,2),l=a[0],d=a[1],s=(0,ne.D)(tn.a,{variables:{userId:null!==(n=null==t?void 0:t.id)&&void 0!==n?n:"",flag:e}}),c=(0,r.Z)(s,1)[0];return{isDismissed:l,dismiss:(0,o.useCallback)((function(){d(!0),c()}),[c])}}(te.T3.EXPLICIT_SIGNAL_TOOLTIP),t=n.isDismissed,i=n.dismiss;return o.createElement(an.A,{isVisible:!t,message:"Looking to save a story? You can now save from the “••• More” menu.",dismissText:"Okay, got it",dismiss:i,boxProps:{maxWidth:"200px"},positioningStrategy:"fixed"},o.createElement(Tn,(0,a.Z)({onButtonClick:i},e)))}},38487:(e,n,t)=>{"use strict";t.d(n,{g:()=>l});var i=t(87329),a=t(46732),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}}].concat((0,i.Z)(a.JP.definitions))}},42732:(e,n,t)=>{"use strict";t.d(n,{c:()=>k});var i=t(87329),a=t(82492),l=t.n(a),o=t(26075),r=t(90386),d=t(67294),s=t(59250),c=t(25550),u=t(18627),m=t(66411),p=t(78285),k=function(e){var n=e.post,t=e.onShowLess,a=e.setDismissedPostId,k=n.id,v=n.collection,f=(0,c.r)().viewerId,g=(0,s.jM)(),b=g.setSeeLessPostIds,S=g.isMutingFromHomeFeed,y=(0,p.w)(),h=(0,o.x)().cache,E=(0,u.A)(),N=(0,m.pK)(),w=(0,d.useRef)(null),x=(0,d.useCallback)((function(){w.current=window.setTimeout((function(){E.event("post.see_less",{userId:f,collection:null==v?void 0:v.id,postId:k,source:N})}),3e3)}),[]),C=(0,d.useCallback)((function(){null!==w.current&&window.clearTimeout(w.current)}),[]),F=(0,d.useCallback)((function(){h.modify({id:h.identify((0,r.kQ)("ROOT_QUERY")),fields:{webRecommendedFeed:function(e,n){var t=n.readField;return l()({},e,{items:e.items.filter((function(e){return(null==e?void 0:e.post)&&t("id",e.post)!==k}))})}}})}),[k]);return{handleShowLess:(0,d.useCallback)((function(){x(),F(),S&&(b((function(e){return[].concat((0,i.Z)(e),[k])})),null==a||a(k)),y({toastStyle:"USER_NEGATIVE_SIGNAL",extraParams:{onClickUndo:C}}),null==t||t()}),[])}}},32947:(e,n,t)=>{"use strict";t.d(n,{l:()=>k});var i=t(22122),a=t(81253),l=t(67294),o=t(38352),r=t(93310),d=t(47230),s=t(92661),c=t(60448),u=["size","href","children","handleClick","buttonStyle","type","isVisible"],m=["href","children","handleClick"],p=["handleClick","isVisible","children","href"],k=function(e){var n=e.size,t=e.href,o=e.children,r=e.handleClick,d=e.buttonStyle,m=e.type,p=e.isVisible,k=void 0===p||p,b=(0,a.Z)(e,u),S=!(0,c.T)(),y=(0,s.dh)(),h=(0,s.H2)(),E=(0,l.useCallback)((function(e){null==r||r(e)}),[r]);if(!k)return null;var N=y(new URL(t).pathname),w=null==N?void 0:N.params.postId,x=t;switch(S||(x=w?h("ShowMobileWebEditorRedirectEditStory",{postId:w}):h("ShowMobileWebEditorRedirectNewStory",{})),m){case"link":return l.createElement(v,(0,i.Z)({href:x,handleClick:E},b),o);case"button":return l.createElement(g,{buttonStyle:d,size:n,href:x,handleClick:E},o);case"popover":return l.createElement(f,(0,i.Z)({isVisible:k,href:x,handleClick:E},b),o)}},v=function(e){var n=e.href,t=e.children,o=e.handleClick,d=(0,a.Z)(e,m);return l.createElement(r.r,(0,i.Z)({href:n,onClick:o},d),t)},f=function(e){var n=e.handleClick,t=e.isVisible,r=void 0===t||t,d=e.children,s=e.href,c=(0,a.Z)(e,p);return r?l.createElement(o.Sl,null,l.createElement(v,(0,i.Z)({href:s,handleClick:n},c),d)):null},g=function(e){var n=e.href,t=e.size,i=e.buttonStyle,a=e.children,o=e.handleClick;return l.createElement(d.zx,{buttonStyle:i,size:t,href:n,onClick:o},a)}},75514:(e,n,t)=>{"use strict";t.d(n,{H:()=>i});var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UserReportStoryMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reason"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportStoryAndMaybeBlockAuthor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"targetAuthorId"},value:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}}},{kind:"Argument",name:{kind:"Name",value:"alsoBlockAuthor"},value:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}}},{kind:"Argument",name:{kind:"Name",value:"reason"},value:{kind:"Variable",name:{kind:"Name",value:"reason"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isBlocking"}}]}}]}}]}}]}},78964:(e,n,t)=>{"use strict";t.d(n,{J:()=>s});var i=t(34699),a=t(21919),l=t(67294),o=t(18627),r=t(78285),d=t(75514);function s(e){var n=e.viewerId,t=e.targetAuthorId,s=e.targetPostId,c=e.onOptimisticComplete,u=(0,r.w)(),m=(0,o.A)(),p=(0,a.D)(d.H),k=(0,i.Z)(p,1)[0];return(0,l.useCallback)((function(e,i){k({variables:{targetAuthorId:t,targetPostId:s,alsoBlockAuthor:e,reason:i},onCompleted:function(){u({message:"Successfully reported post."}),m.event("post.flagged",{postId:s,reason:i})},onError:function(){u({message:"Unable to report this story. Please try again later."})},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:t,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(t,"-viewerId:").concat(n),isBlocking:e}}}}),null==c||c()}),[k,n,t,s,c])}},91727:(e,n,t)=>{"use strict";t.d(n,{S:()=>i,P:()=>a});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]}},70679:(e,n,t)=>{"use strict";t.d(n,{w:()=>w});var i=t(96156),a=t(34699),l=t(21919),o=t(67294),r=t(25267),d=t(38352),s=t(93310),c=t(77355),u=t(1383),m=t(87691),p=t(14646),k=t(78285);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},v.apply(this,arguments)}var f=o.createElement("path",{d:"M0 .35v15.3h20V.35H0zm6.95 9.38l3.05 2.5 3.05-2.5 4.88 4.73H2.07l4.88-4.73zM1.2 13.64V5.02l4.82 3.94-4.82 4.68zm12.78-4.68l4.82-3.94v8.62l-4.82-4.68zm4.82-7.42v1.94l-8.8 7.2-8.8-7.2V1.54h17.6z"});const g=function(e){return o.createElement("svg",v({width:20,height:16,viewBox:"0 0 20 16"},e),f)};var b=t(68894),S=t(91727);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function E(e){return{fill:e.colorTokens.foreground.neutral.secondary.base}}var N={height:"16px",width:"16px",marginLeft:"4px"};function w(e){var n=e.post,t=e.onClick,i=e.menuStyle,v=(0,p.I)(),f=(0,b.O)(!1),y=(0,a.Z)(f,3),w=y[0],x=y[1],C=y[2],F=(0,k.w)(),O=function(){C(),t()},P=(0,l.D)(S.P,{variables:{postId:(null==n?void 0:n.id)||""},onCompleted:function(e){var n=e.sendPostAsEmails;F(n?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,t){var i={id:"Post:".concat(null==n?void 0:n.id),fragment:S.S,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},a=e.readFragment(i);t.data&&a&&e.writeFragment(h(h({},i),{},{data:h(h({},a),{},{isAuthorNewsletter:t.data.sendPostAsEmails})}))}}),I=(0,a.Z)(P,1)[0];return o.createElement(r.I,null,(function(e){var a,l,r;return e&&e.id===(null==n||null===(a=n.creator)||void 0===a?void 0:a.id)&&(null==n||!n.isNewsletter)&&((null==n||null===(l=n.creator)||void 0===l||null===(r=l.newsletterV3)||void 0===r?void 0:r.subscribersCount)||0)>0?o.createElement(o.Fragment,null,o.createElement(d.Sl,{paddingTopBottom:"8px"},o.createElement(s.r,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(F({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),t()):x()}},"TEXT"===i?o.createElement(c.x,{display:"inline-block"},o.createElement(m.F,{scale:"M"},"Email to subscribers")):o.createElement(c.x,{display:"inline-block"},o.createElement(g,{className:v([E,N])}),o.createElement(c.x,{display:"inline-block",marginLeft:"20px"},o.createElement(m.F,{scale:"S"},"Email to subscribers"))))),o.createElement(u.Q,{onConfirm:function(){I(),O()},isVisible:w,hide:O,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers.")):o.createElement(o.Fragment,null)}))}},43220:(e,n,t)=>{"use strict";t.d(n,{U:()=>i,I:()=>a});var i=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)},a=function(e){return!!e&&("Collection"===e.__typename?e.isAuroraVisible||e.isAuroraEligible&&e.viewerEdge.isEditor:e.isAuroraVisible)}},36736:(e,n,t)=>{"use strict";t.d(n,{x:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}}]}},31048:(e,n,t)=>{"use strict";t.d(n,{K:()=>d,I:()=>s});var i=t(34699),a=t(21919),l=t(67294),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetPinnedAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"setPinnedAt"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"targetCollectionId"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}},{kind:"Argument",name:{kind:"Name",value:"pinnedAt"},value:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}}]}}]}}]}}]},r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostSetPinnedByCreatorAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPinned"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostPinnedOnCreatorProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"isPinned"},value:{kind:"Variable",name:{kind:"Name",value:"isPinned"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},d=function(e){var n=e.id,t=e.collection,r=e.pendingCollection,d=e.pinnedAt,s=(t||r||{id:""}).id,c=(0,a.D)(o,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:n,collection:t,pendingCollection:r,pinnedAt:d?0:Date.now()}}}),u=(0,i.Z)(c,1)[0],m=l.useCallback((function(){return u({variables:{postId:n,collectionId:s,pinnedAt:!d}})}),[n,s,d,u]);return[d,m]},s=function(e){var n=e.id,t=e.pinnedByCreatorAt,o=(0,a.D)(r,{optimisticResponse:{setPostPinnedOnCreatorProfile:{__typename:"MutationSuccess"}},update:function(e,i){var a;"MutationSuccess"===(null===(a=i.data)||void 0===a?void 0:a.setPostPinnedOnCreatorProfile.__typename)&&e.modify({id:"Post:".concat(n),fields:{pinnedByCreatorAt:function(){return t?0:Date.now()}}})}}),d=(0,i.Z)(o,1)[0],s=l.useCallback((function(){return d({variables:{postId:n,isPinned:!t}})}),[n,d,t]);return[t,s]}},74302:(e,n,t)=>{"use strict";t.d(n,{Q:()=>i,t:()=>a});var i="This story is also a response to another story. Are you sure you want to delete this story?",a="This story is also a response to another story. Any edits are applied to both."},17417:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var i=t(22122),a=t(67294),l=t(93310),o=t(77355),r=t(73917),d=t(87691),s=t(14646),c=function(e){var n=e.boxProps,t=void 0===n?{}:n,c=e.children,u=e.dismiss,m=e.dismissText,p=void 0===m?"Ok, got it.":m,k=e.isVisible,v=e.onShow,f=e.message,g=e.withBoldNew,b=void 0!==g&&g,S=e.targetDistance,y=void 0===S?5:S,h=e.positioningStrategy,E=(0,s.I)();return a.useEffect((function(){k&&v&&v()}),[k]),a.createElement(r.J,{hide:u,isVisible:k,noPortal:!0,darkTheme:!0,popoverRenderFn:function(){return a.createElement(o.x,(0,i.Z)({padding:"16px"},t),a.createElement(o.x,{marginBottom:"8px"},a.createElement(d.F,{scale:"S",color:"WHITE",tag:"span"},b&&a.createElement("strong",null,"New! "),f)),a.createElement(d.F,{scale:"S"},a.createElement(l.r,{onClick:u},a.createElement("span",{className:E(r.u)},p))))},referenceWidth:"100%",targetDistance:y,positioningStrategy:h},c)}},53563:(e,n,t)=>{"use strict";t.d(n,{u:()=>O});var i=t(34699),a=t(67294),l=t(71899),o=t(91553),r=t(77355),d=t(47230),s=t(91583),c=t(18635),u=t(18634),m=t(21755),p=t(20113),k=t(87691),v=t(62528),f=t(78142),g=t(17583),b={xs:"SMALL",sm:"REGULAR",md:"REGULAR",lg:"REGULAR",xl:"REGULAR"},S={position:"absolute",top:"8px",left:"0",width:"100%",minHeight:"calc(100% - 8px)",borderRadius:"12px 12px 0 0",padding:"0 24px 24px"},y=function(e){return{"0%":{transform:e?"translateY(100%)":"translateY(16px)"},"100%":{transform:e?"translateY(0%)":"translateY(0px)"}}},h=function(e){return{"0%":{transform:e?"translateY(0%)":"translateY(0px)"},"100%":{transform:e?"translateY(100%)":"translateY(16px)"}}},E={"0%":{opacity:"0"},"100%":{opacity:"1"}},N={"0%":{opacity:"1"},"100%":{opacity:"0"}},w={"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.02)"},"75%":{transform:"scale(1.02)"},"100%":{transform:"scale(1)"}},x={"0%":{background:(0,f.Uy)(0)},"100%":{background:(0,f.Uy)(.25)}},C={"0%":{background:(0,f.Uy)(.25)},"100%":{background:(0,f.Uy)(0)}},F=function(e){var n=e.slideAnimationName,t=e.fadeAnimationName,i=e.isMobile;return function(){var e="".concat(n," ").concat(300,"ms forwards cubic-bezier(0.4, 0, 0.2, 1)");if(i)return{animation:e,position:"absolute",width:"100%",height:"calc(100% - 8px)"};var a="".concat(t," 150ms forwards ease-in-out");return{animation:"".concat(e,", ").concat(a)}}},O=function(e){var n=e.hide,t=e.title,O=e.subtitle,P=e.subtitleTextAlign,I=e.onConfirm,D=e.confirmText,T=e.confirmButtonStyle,A=void 0===T?"STRONG":T,R=e.onCancel,V=e.cancelText,_=e.cancelButtonStyle,M=void 0===_?"OBVIOUS":_,j=e.children,L=e.withCloseButton,Z=void 0===L||L,B=e.hideOnConfirm,U=void 0===B||B,H=e.preventClickOutside,z=e.confirmDisabled,G=e.confirmBeforeLeavePage,K=e.delayHideEnabled,W=e.padding,Q=void 0===W?"32px":W,Y=e.subtitleMargin,J=void 0===Y?"24px":Y,q=e.subtitleColor,X=void 0===q?"DARKER":q,$=(0,a.useRef)(null),ee=(0,a.useState)(!1),ne=(0,i.Z)(ee,2),te=ne[0],ie=ne[1],ae=(0,a.useState)(!0),le=(0,i.Z)(ae,2),oe=le[0],re=le[1],de=(0,g.s)()===m.j.xs,se=(0,v.o)({modalSlideInKeyframe:y(de),modalSlideOutKeyframe:h(de),modalFadeInKeyframe:E,modalFadeOutKeyframe:N,modalBounceKeyframe:w,overlayFadeInKeyframe:x,overlayFadeOutKeyframe:C}),ce=se.modalSlideInKeyframe,ue=se.modalSlideOutKeyframe,me=se.modalFadeInKeyframe,pe=se.modalFadeOutKeyframe,ke=se.modalBounceKeyframe,ve=se.overlayFadeInKeyframe,fe=se.overlayFadeOutKeyframe,ge=(0,a.useCallback)((function(){re(!1)}),[]),be=(0,a.useCallback)((function(e){$.current&&H&&!de&&(e.preventDefault(),e.stopPropagation(),$.current.style.animation="".concat(ke," 600ms ease-in-out"),ie(!0))}),[ke,H,de]);(0,l.Z)($,be),(0,o.a)({disabled:!G});var Se,ye=(0,a.useCallback)((function(){null==I||I(),U&&ge()}),[ge,I,U]),he=(0,a.useCallback)((function(){null==R||R(),ge()}),[ge,R]),Ee=(0,a.useMemo)((function(){return D||V?a.createElement(r.x,{display:"flex",justifyContent:"flex-end",gap:"16px"},V&&a.createElement(d.zx,{buttonStyle:M,onClick:he,size:b},V),D&&a.createElement(d.zx,{buttonStyle:A,onClick:ye,size:b,disabled:z},D)):null}),[I,D,A,R,V,M,ge,z]);return(0,a.useEffect)((function(){if($.current&&te)return $.current.addEventListener("animationend",e),function(){var n;null===(n=$.current)||void 0===n||n.removeEventListener("animationend",e)};function e(){$.current.style.animation="",ie(!1)}}),[te,oe,n]),(0,a.useEffect)((function(){if(!oe&&n){var e=setTimeout((function(){n()}),310);return function(){clearTimeout(e)}}}),[oe,n]),(0,a.useEffect)((function(){K&&re(!1)}),[K]),a.createElement(s.V,{isVisible:oe,hide:H?void 0:ge,withCloseButton:!1,withLayerAnimation:!1,withAnimation:!0,padding:0,customBackgroundColor:(0,f.Uy)(.25),layerRules:(Se=oe?ve:fe,function(){return{animation:"".concat(Se," 150ms forwards ease-in-out")}}),containerRules:F({slideAnimationName:oe?ce:ue,fadeAnimationName:oe?me:pe,isMobile:de})},a.createElement(r.x,{ref:$,boxShadow:"rgba(0, 0, 0, 0.15) 0px 2px 10px",width:"540px",padding:Q,borderRadius:"4px",backgroundColor:"BACKGROUND",position:"relative",xs:S},a.createElement(u.y,{xs:!0,height:"56px",marginBottom:"16px",paddingTop:"16px"},Ee),a.createElement(r.x,{textAlign:"center"},a.createElement(p.X6,{scale:"S"},t)),O&&a.createElement(r.x,{marginTop:J,textAlign:P},a.createElement(k.F,{scale:"M",color:X},O)),j&&a.createElement(r.x,{marginTop:"32px"},j),Ee&&a.createElement(u.y,{sm:!0,md:!0,lg:!0,xl:!0,marginTop:"32px"},Ee),Z&&a.createElement(r.x,{position:"absolute",right:{xs:void 0,sm:"16px",md:"16px",lg:"16px",xl:"16px"},top:{xs:"18px",sm:"16px",md:"16px",lg:"16px",xl:"16px"},left:{xs:"18px",sm:void 0,md:void 0,lg:void 0,xl:void 0}},a.createElement(c.P,{isPositionAbsolute:!1,compensateInnerPadding:!1,size:"REGULAR",onClick:ge}))))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/5700.fd883ac8.chunk.js.map